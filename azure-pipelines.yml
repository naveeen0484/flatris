trigger:
  branches:
    include:
      - main   # change if your default branch is different

variables:
  # Replace with your ACR details
  ACR_NAME: myacrnvn
  IMAGE_NAME: flatris

pool:
  vmImage: 'ubuntu-latest'

steps:
  - task: self
    displayName: 'Checkout repository'

  - task: Docker@2
    displayName: 'Build and push image to ACR'
    inputs:
      containerRegistry: 'AKS-ServiceConnection'  # name of your service connection
      repository: '$(IMAGE_NAME)'
      command: 'buildAndPush'
      Dockerfile: '**/Dockerfile'
      tags: |
        $(Build.BuildId)
